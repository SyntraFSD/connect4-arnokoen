{"version":3,"sources":["../../src/js/index.js"],"names":["mainElement","document","querySelector","drawMessage","initGameState","state","turn","winner","winnerColor","full","board","changeTurn","col","htmlboard","classList","remove","add","dropStone","colList","indexEmpty","dataset","index","reduce","acc","value","console","log","fullCheck","checkFull","colsHtml","colIndex","row","rowIndex","fullCheckChecker","generateBoardHtml","colHtml","rowsHtml","drawBoard","htmlElement","boardElement","createElement","id","innerHTML","appendChild","stateMessage","addEventListener","event","target","closest","matches","newDrop","textContent"],"mappings":"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","sourcesContent":["\r\n// ------------------------- MODEL\r\n\r\nconst mainElement = document.querySelector('main');\r\nconst drawMessage = document.querySelector('.drawMessage');\r\ninitGameState();\r\nlet state = {\r\n  turn: 'yellow',\r\n  winner: false,\r\n  winnerColor: null,\r\n  full: false,\r\n  board: [['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n        ]\r\n};\r\n\r\nfunction initGameState() {\r\n  state = {\r\n    turn: 'yellow',\r\n    winner: false,\r\n    winnerColor: null,\r\n    full: false,\r\n    board: [['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n            ['empty', 'empty', 'empty', 'empty', 'empty', 'empty'],\r\n          ]\r\n  };\r\n}\r\n\r\n// ------------------------- UPDATE\r\n\r\nfunction changeTurn(state, col) {\r\n  if (state.turn === 'yellow') {\r\n    state.turn = 'red';\r\n    htmlboard.classList.remove('yellow');\r\n    htmlboard.classList.add('red');\r\n  } else {\r\n    state.turn = 'yellow';\r\n    htmlboard.classList.remove('red');\r\n    htmlboard.classList.add('yellow');\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction dropStone(colList, state) {\r\n  const indexEmpty = state.board[colList.dataset.index].reduce(function (acc, value, index) {\r\n    if (acc === false) {\r\n      if (value === 'empty') {\r\n        return index;\r\n      } else {\r\n        return acc;\r\n      }\r\n    } else {\r\n      return acc;\r\n    }\r\n  }, false);\r\n\r\n  if (indexEmpty === false) {\r\n    return false;\r\n  } else {\r\n    state.board[colList.dataset.index][indexEmpty] = state.turn;\r\n    console.log(state.board);\r\n    return state;\r\n  }\r\n}\r\n\r\nfunction fullCheck(board) {\r\n  const checkFull = board.reduce(function (colsHtml, col, colIndex) {\r\n    return col.reduce(function (acc, row, rowIndex) {\r\n      if (row === 'empty') {\r\n        return false;\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, colsHtml);\r\n  }, true);\r\n  return checkFull;\r\n}\r\n\r\nfunction fullCheckChecker(state) {\r\n  if (fullCheck(state.board) === true) {\r\n    state.full = true;\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\n// ------------------------- VIEW\r\n\r\nfunction generateBoardHtml(board) {\r\n  return board.reduce(function (colsHtml, col, colIndex) {\r\n    let colHtml = '<div class=\"col\" data-index=\"' + colIndex + '\">';\r\n    colHtml += col.reduce(function (rowsHtml, row, rowIndex) {\r\n      return '<div class=\"row ' + row + '\"></div>' + rowsHtml;\r\n    }, '');\r\n    colHtml += '</div>';\r\n    return colsHtml + colHtml;\r\n  }, '');\r\n}\r\n\r\nfunction drawBoard(board, turn, htmlElement, boardElement) {\r\n  if (!boardElement) {\r\n    boardElement = document.createElement('div');\r\n  }\r\n\r\n  boardElement.id = 'board';\r\n  boardElement.classList.add(turn);\r\n  boardElement.innerHTML = generateBoardHtml(board);\r\n  htmlElement.appendChild(boardElement);\r\n  return boardElement;\r\n}\r\n\r\nfunction stateMessage(state) {\r\n  if (state.full === true) {\r\n    return \"gelijk\";\r\n  } else if (state.winner === true) {\r\n    return \"winner \" + state.winnerColor;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\n// ------------------------- EVENT\r\n\r\nlet htmlboard = drawBoard(state.board, state.turn, mainElement);\r\nhtmlboard.addEventListener('click', function (event) {\r\n  const colList = event.target.closest('.col');\r\n\r\n  if (event.target.matches('.col,.row')) {\r\n    const newDrop = dropStone(colList, state);\r\n\r\n    if (newDrop) {\r\n      state = newDrop;\r\n      state = fullCheckChecker(state);\r\n      state = changeTurn(state);\r\n      drawMessage.textContent = stateMessage(state);\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n    } else if (state.full === true) {\r\n      initGameState();\r\n      drawBoard(state.board, state.turn, mainElement, htmlboard);\r\n      drawMessage.textContent = stateMessage(state);\r\n    }\r\n  }\r\n});\r\n\r\n\r\n"],"file":"index.js"}