{"version":3,"sources":["../../src/js/login.js"],"names":["Register","document","querySelector","Login","BtnRegister","BtnLogin","loginAlert","toggleForm","classList","toggle","hideLoginAlert","add","showLoginAlert","content","succes","remove","textContent","getFormData","inputFields","querySelectorAll","formData","forEach","inputField","name","value","handleLoginRequest","event","request","target","readyState","response","JSON","parse","responseText","status","access_token","window","localStorage","setItem","location","error","login","preventDefault","XMLHttpRequest","addEventListener","open","setRequestHeader","send","stringify","console","log","register"],"mappings":"AAAA,IAAMA,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAjB;AACA,IAAMC,KAAK,GAAGF,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAd;AACA,IAAME,WAAW,GAAGH,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAApB;AACA,IAAMG,QAAQ,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAjB;AACA,IAAMI,UAAU,GAAGL,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAnB;;AAEA,SAASK,UAAT,GAAsB;AACpBP,EAAAA,QAAQ,CAACQ,SAAT,CAAmBC,MAAnB,CAA0B,UAA1B;AACAN,EAAAA,KAAK,CAACK,SAAN,CAAgBC,MAAhB,CAAuB,UAAvB;AACD;;AAED,SAASC,cAAT,GAA0B;AACxBJ,EAAAA,UAAU,CAACE,SAAX,CAAqBG,GAArB,CAAyB,UAAzB;AACD;;AAED,SAASC,cAAT,CAAwBC,OAAxB,EAAiD;AAAA,MAAhBC,MAAgB,uEAAP,KAAO;;AAC/C,MAAIA,MAAJ,EAAY;AACVR,IAAAA,UAAU,CAACE,SAAX,CAAqBG,GAArB,CAAyB,SAAzB;AACD,GAFD,MAEO;AACLL,IAAAA,UAAU,CAACE,SAAX,CAAqBO,MAArB,CAA4B,SAA5B;AACD;;AACDT,EAAAA,UAAU,CAACU,WAAX,GAAyBH,OAAzB;AACAP,EAAAA,UAAU,CAACE,SAAX,CAAqBO,MAArB,CAA4B,UAA5B;AACD;;AAED,SAASE,WAAT,GAAuB;AACrB,MAAMC,WAAW,GAAGf,KAAK,CAACgB,gBAAN,CAAuB,OAAvB,CAApB;AACA,MAAMC,QAAQ,GAAG,EAAjB;AACAF,EAAAA,WAAW,CAACG,OAAZ,CAAoB,UAAUC,UAAV,EAAsB;AACxCF,IAAAA,QAAQ,CAACE,UAAU,CAACC,IAAZ,CAAR,GAA4BD,UAAU,CAACE,KAAvC;AACD,GAFD;AAGA,SAAOJ,QAAP;AACD;;AAED,SAASK,kBAAT,CAA4BC,KAA5B,EAAmC;AACjC,MAAMC,OAAO,GAAGD,KAAK,CAACE,MAAtB;;AACA,MAAID,OAAO,CAACE,UAAR,KAAuB,CAA3B,EAA8B;AAC5B,QAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWL,OAAO,CAACM,YAAnB,CAAjB;;AACA,QAAIN,OAAO,CAACO,MAAR,IAAkB,GAAlB,IAAyBP,OAAO,CAACO,MAAR,GAAiB,GAA9C,EAAmD;AACjDtB,MAAAA,cAAc,CAAC,yBAAD,EAA4B,IAA5B,CAAd;AACA;;;;;;AAKA,UAAIkB,QAAQ,CAACK,YAAb,EAA2B;AACzBC,QAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCR,QAAQ,CAACK,YAA9C;AACAC,QAAAA,MAAM,CAACG,QAAP,GAAkB,aAAlB;AACD;AACF,KAXD,MAWO,IAAIZ,OAAO,CAACO,MAAR,KAAmB,GAAvB,EAA4B;AACjCtB,MAAAA,cAAc,CAACkB,QAAQ,CAACU,KAAV,CAAd;AACD;AACF;AACF;;AAED,SAASC,KAAT,CAAef,KAAf,EAAsB;AACpBA,EAAAA,KAAK,CAACgB,cAAN;AACA,MAAMtB,QAAQ,GAAGH,WAAW,CAACd,KAAD,CAA5B;AACA,MAAMwB,OAAO,GAAG,IAAIgB,cAAJ,EAAhB;AACAhB,EAAAA,OAAO,CAACiB,gBAAR,CAAyB,kBAAzB,EAA6CnB,kBAA7C;AACAE,EAAAA,OAAO,CAACkB,IAAR,CAAa,MAAb,EAAqB,8CAArB;AACAlB,EAAAA,OAAO,CAACmB,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC;AACAnB,EAAAA,OAAO,CAACoB,IAAR,CAAahB,IAAI,CAACiB,SAAL,CAAe5B,QAAf,CAAb;AACA6B,EAAAA,OAAO,CAACC,GAAR,CAAY9B,QAAZ;AACD;;AAED,SAAS+B,QAAT,CAAkBzB,KAAlB,EAAyB;AACvBA,EAAAA,KAAK,CAACgB,cAAN;AACA,MAAMtB,QAAQ,GAAGH,WAAW,CAACkC,QAAD,CAA5B;AACA,MAAMxB,OAAO,GAAG,IAAIgB,cAAJ,EAAhB;AACAhB,EAAAA,OAAO,CAACiB,gBAAR,CAAyB,kBAAzB,EAA6C,YAAY;AACvDK,IAAAA,OAAO,CAACC,GAAR,CAAYxB,KAAZ;AACD,GAFD;AAGAC,EAAAA,OAAO,CAACkB,IAAR,CAAa,MAAb,EAAqB,0CAArB;AACAlB,EAAAA,OAAO,CAACmB,gBAAR,CAAyB,cAAzB,EAAyC,kBAAzC;AACAnB,EAAAA,OAAO,CAACoB,IAAR,CAAahB,IAAI,CAACiB,SAAL,CAAe5B,QAAf,CAAb;AACA6B,EAAAA,OAAO,CAACC,GAAR,CAAY9B,QAAZ;AACD;;AAGDhB,WAAW,CAACwC,gBAAZ,CAA6B,OAA7B,EAAsCrC,UAAtC;AACAF,QAAQ,CAACuC,gBAAT,CAA0B,OAA1B,EAAmCrC,UAAnC;AACAJ,KAAK,CAACyC,gBAAN,CAAuB,QAAvB,EAAiCH,KAAjC;AACAzC,QAAQ,CAAC4C,gBAAT,CAA0B,QAA1B,EAAoCO,QAApC;AACAhD,KAAK,CAACyC,gBAAN,CAAuB,OAAvB,EAAgClC,cAAhC","sourcesContent":["const Register = document.querySelector('.Form-register');\nconst Login = document.querySelector('.Form-login');\nconst BtnRegister = document.querySelector('#Register');\nconst BtnLogin = document.querySelector('#Login');\nconst loginAlert = document.querySelector('.login-alert');\n\nfunction toggleForm() {\n  Register.classList.toggle('inactive');\n  Login.classList.toggle('inactive');\n}\n\nfunction hideLoginAlert() {\n  loginAlert.classList.add('inactive');\n}\n\nfunction showLoginAlert(content, succes = false) {\n  if (succes) {\n    loginAlert.classList.add('success');\n  } else {\n    loginAlert.classList.remove('success');\n  }\n  loginAlert.textContent = content;\n  loginAlert.classList.remove('inactive');\n}\n\nfunction getFormData() {\n  const inputFields = Login.querySelectorAll('input');\n  const formData = {};\n  inputFields.forEach(function (inputField) {\n    formData[inputField.name] = inputField.value;\n  });\n  return formData;\n}\n\nfunction handleLoginRequest(event) {\n  const request = event.target;\n  if (request.readyState === 4) {\n    const response = JSON.parse(request.responseText);\n    if (request.status >= 200 && request.status < 300) {\n      showLoginAlert('joepie je bent ingelogd', true);\n      /*\n        1 - check the response\n        2 - sla de token op in localstorage\n        3 - redirect naar closed.html\n      */\n      if (response.access_token) {\n        window.localStorage.setItem('token', response.access_token);\n        window.location = 'closed.html';\n      }\n    } else if (request.status === 401) {\n      showLoginAlert(response.error);\n    }\n  }\n}\n\nfunction login(event) {\n  event.preventDefault();\n  const formData = getFormData(Login);\n  const request = new XMLHttpRequest();\n  request.addEventListener('readystatechange', handleLoginRequest);\n  request.open('POST', 'http://connect4.pienter.space/api/auth/login');\n  request.setRequestHeader('Content-Type', 'application/json');\n  request.send(JSON.stringify(formData));\n  console.log(formData);\n}\n\nfunction register(event) {\n  event.preventDefault();\n  const formData = getFormData(register);\n  const request = new XMLHttpRequest();\n  request.addEventListener('readystatechange', function () {\n    console.log(event);\n  });\n  request.open('POST', 'connect4.pienter.space/api/auth/register');\n  request.setRequestHeader('Content-Type', 'application/json');\n  request.send(JSON.stringify(formData));\n  console.log(formData);\n}\n\n\nBtnRegister.addEventListener('click', toggleForm);\nBtnLogin.addEventListener('click', toggleForm);\nLogin.addEventListener('submit', login);\nRegister.addEventListener('submit', register);\nLogin.addEventListener('input', hideLoginAlert);\n"],"file":"login.js"}