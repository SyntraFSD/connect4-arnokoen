{"version":3,"sources":["../../src/js/login.js"],"names":["Register","document","querySelector","Login","BtnRegister","BtnLogin","loginAlert","toggleForm","classList","toggle","hideLoginAlert","add","showLoginAlert","content","succes","remove","textContent","getFormData","inputFields","querySelectorAll","formData","forEach","inputField","name","value","handleLoginRequest","event","request","target","readyState","response","JSON","parse","responseText","status","access_token","window","localStorage","setItem","setTimeout","location","error","login","preventDefault","XMLHttpRequest","addEventListener","open","setRequestHeader","send","stringify","console","log","register"],"mappings":"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","sourcesContent":["const Register = document.querySelector('.Form-register');\r\nconst Login = document.querySelector('.Form-login');\r\nconst BtnRegister = document.querySelector('#Register');\r\nconst BtnLogin = document.querySelector('#Login');\r\nconst loginAlert = document.querySelector('.login-alert');\r\n\r\nfunction toggleForm() {\r\n  Register.classList.toggle('inactive');\r\n  Login.classList.toggle('inactive');\r\n}\r\n\r\nfunction hideLoginAlert() {\r\n  loginAlert.classList.add('inactive');\r\n}\r\n\r\nfunction showLoginAlert(content, succes = false) {\r\n  if (succes) {\r\n    loginAlert.classList.add('success');\r\n  } else {\r\n    loginAlert.classList.remove('success');\r\n  }\r\n  loginAlert.textContent = content;\r\n  loginAlert.classList.remove('inactive');\r\n}\r\n\r\nfunction getFormData() {\r\n  const inputFields = Login.querySelectorAll('input');\r\n  const formData = {};\r\n  inputFields.forEach(function (inputField) {\r\n    formData[inputField.name] = inputField.value;\r\n  });\r\n  return formData;\r\n}\r\n\r\nfunction handleLoginRequest(event) {\r\n  const request = event.target;\r\n  if (request.readyState === 4) {\r\n    const response = JSON.parse(request.responseText);\r\n    if (request.status >= 200 && request.status < 300) {\r\n      showLoginAlert('joepie je bent ingelogd', true);\r\n      /*\r\n        1 - check the response\r\n        2 - sla de token op in localstorage\r\n        3 - redirect naar closed.html\r\n      */\r\n      if (response.access_token) {\r\n        window.localStorage.setItem('token', response.access_token);\r\n        setTimeout(function () {\r\n          window.location = 'closed.html';\r\n        } ,2000);\r\n\r\n      }\r\n      }\r\n    } else if (request.status === 401) {\r\n      showLoginAlert(response.error);\r\n    }\r\n  }\r\n  \r\n\r\nfunction login(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(Login);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', handleLoginRequest);\r\n  request.open('POST', 'http://connect4.pienter.space/api/auth/login');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n  console.log(formData);\r\n}\r\n\r\nfunction register(event) {\r\n  event.preventDefault();\r\n  const formData = getFormData(register);\r\n  const request = new XMLHttpRequest();\r\n  request.addEventListener('readystatechange', function () {\r\n    console.log(event);\r\n  });\r\n  request.open('POST', 'connect4.pienter.space/api/auth/register');\r\n  request.setRequestHeader('Content-Type', 'application/json');\r\n  request.send(JSON.stringify(formData));\r\n  console.log(formData);\r\n}\r\n\r\n\r\nBtnRegister.addEventListener('click', toggleForm);\r\nBtnLogin.addEventListener('click', toggleForm);\r\nLogin.addEventListener('submit', login);\r\nRegister.addEventListener('submit', register);\r\nLogin.addEventListener('input', hideLoginAlert);\r\n"],"file":"login.js"}